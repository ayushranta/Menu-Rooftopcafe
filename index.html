<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Yashoday | Digital Ordering</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0f1c2e; /* Dark Blue */
            --accent: #c5a059;  /* Gold */
            --bg: #fdfaf5;
            --white: #ffffff;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg); color: #333; padding-bottom: 80px; }

        /* --- UTILITY & BASE STYLES --- */
        .btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: var(--accent); }
        .btn-accent { background: var(--accent); color: var(--primary); }
        .btn-danger { background: var(--danger); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-outline { border: 1px solid #ddd; background: transparent; color: #333; }
        .full-width { width: 100%; }
        .hidden { display: none !important; }

        header {
            background: var(--primary);
            color: var(--accent);
            text-align: center;
            padding: 2rem 1rem;
            border-bottom: 4px solid var(--accent);
            position: relative;
        }

        /* Header Buttons */
        .header-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }

        .header-btn {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        /* --- NAVIGATION --- */
        .nav-container {
            overflow-x: auto;
            white-space: nowrap;
            background: var(--accent);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .nav-container a {
            color: var(--primary);
            text-decoration: none;
            padding: 5px 15px;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            display: inline-block;
            border-right: 1px solid rgba(15, 28, 46, 0.1);
        }
        .nav-container::-webkit-scrollbar { height: 0px; }

        /* --- MENU LAYOUT --- */
        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
        .category-section { margin-bottom: 40px; scroll-margin-top: 80px; }
        .category-title {
            font-family: 'Playfair Display', serif;
            background: var(--primary);
            color: var(--accent);
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 1.2rem;
            text-align: center;
        }
        .sub-category-title {
            color: var(--primary);
            font-weight: 700;
            border-bottom: 2px solid var(--accent);
            margin: 20px 0 10px 0;
            font-family: 'Playfair Display', serif;
        }

        /* Interactive Menu Row */
        .menu-list { display: flex; flex-direction: column; gap: 2px; }
        .menu-row {
            background: var(--white);
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            border-left: 4px solid transparent;
            cursor: pointer; 
            transition: 0.2s;
        }
        .menu-row:hover, .menu-row:active {
            border-left: 4px solid var(--accent);
            background: #fffdf9;
        }
        .item-name { font-weight: 500; font-size: 0.95rem; color: #2c3e50; }
        .item-price { font-weight: 700; color: var(--accent); font-size: 1rem; }
        
        .add-icon {
            font-size: 1.2rem;
            color: var(--primary);
            margin-left: 10px;
            opacity: 0.3;
        }
        .menu-row:hover .add-icon { opacity: 1; }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            display: none; 
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }

        .modal-card {
            background: white;
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header { font-size: 1.2rem; font-weight: 700; margin-bottom: 15px; color: var(--primary); border-bottom: 1px solid #eee; padding-bottom: 10px; display: flex; justify-content: space-between; }
        .close-modal { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999; }

        /* --- CART FAB --- */
        .cart-fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: var(--accent);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            z-index: 1500;
            font-size: 1.5rem;
            border: 2px solid var(--accent);
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            font-size: 0.7rem;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        /* --- ORDER CARDS --- */
        .order-card {
            background: white;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 5px solid #ddd;
            position: relative;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
        }
        .bg-pending { background-color: var(--warning); color: #333; }
        .bg-accepted { background-color: var(--info); }
        .bg-completed { background-color: var(--success); }
        .bg-rejected { background-color: var(--danger); }

        .order-card.status-Pending { border-left-color: var(--warning); }
        .order-card.status-Accepted { border-left-color: var(--info); }
        .order-card.status-Completed { border-left-color: var(--success); }
        
        .order-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.9rem; color: #666; }
        .order-items-list { margin: 10px 0; font-size: 0.95rem; }

        /* --- FORMS --- */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 0.9rem; font-weight: 600; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }

        footer { text-align: center; padding: 30px; font-size: 0.8rem; color: #666; background: #eee; margin-top: 40px; }
    </style>
</head>
<body>

<header>
    <div class="header-controls">
        <button id="btn-my-orders" class="header-btn hidden" onclick="openMyOrdersModal()">My Orders</button>
        <button id="btn-login" class="header-btn" onclick="openLoginModal()">Login / Admin</button>
    </div>
    
    <p style="font-size: 0.9rem; letter-spacing: 2px; margin-bottom: 5px;">JAI JINENDRA</p>
    <h1 style="font-family: 'Playfair Display', serif; font-size: 2.5rem;">HOTEL YASHODAY</h1>
    <p style="letter-spacing: 1px; font-size: 0.9rem;">Digital Menu & Ordering</p>
</header>

<div class="nav-container">
    <a href="#tea">Tea</a>
    <a href="#breakfast">Breakfast</a>
    <a href="#maggi">Maggi/Pasta</a>
    <a href="#pizza">Pizza</a>
    <a href="#indian">Main Course</a>
    <a href="#chinese">Chinese</a>
    <a href="#kulfi">Kulfi</a>
    <a href="#shakes">Shakes</a>
</div>

<div class="container" id="menu-container">
    
    <div id="admin-panel" class="hidden">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 class="category-title" style="margin:0;">Admin Dashboard</h2>
            <button class="btn btn-outline" onclick="logout()">Logout</button>
        </div>
        <div class="sub-category-title">Live Orders <button class="btn btn-outline" style="font-size: 0.7rem; float: right;" onclick="renderAdminOrders()">Refresh</button></div>
        <div id="admin-orders-list"></div>
    </div>

    <div id="customer-view">
        <section id="tea" class="category-section">
            <h2 class="category-title">Tea & Coffee</h2>
            <div class="menu-list">
                <div class="menu-row" onclick="openItemModal('Classic Tea', 30)"><span class="item-name">Classic Tea</span><div><span class="item-price">30</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Black Tea', 30)"><span class="item-name">Black Tea</span><div><span class="item-price">30</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Hot Coffee', 40)"><span class="item-name">Hot Coffee</span><div><span class="item-price">40</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Cappuccino', 60)"><span class="item-name">Cappuccino</span><div><span class="item-price">60</span><span class="add-icon">+</span></div></div>
            </div>
        </section>

        <section id="breakfast" class="category-section">
            <h2 class="category-title">Breakfast</h2>
            <div class="menu-list">
                <div class="menu-row" onclick="openItemModal('Jam Toast', 40)"><span class="item-name">Jam Toast</span><div><span class="item-price">40</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Veg Pakoda', 90)"><span class="item-name">Veg Pakoda</span><div><span class="item-price">90</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Aloo Paratha', 65)"><span class="item-name">Aloo Paratha</span><div><span class="item-price">65</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Cholle Bhature', 90)"><span class="item-name">Cholle Bhature</span><div><span class="item-price">90</span><span class="add-icon">+</span></div></div>
            </div>
        </section>

        <section id="maggi" class="category-section">
            <h2 class="category-title">Maggi & Pasta</h2>
            <div class="menu-list">
                <div class="menu-row" onclick="openItemModal('Classic Maggi', 30)"><span class="item-name">Classic Maggi</span><div><span class="item-price">30</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Cheese Maggi', 60)"><span class="item-name">Cheese Maggi</span><div><span class="item-price">60</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Red Sauce Pasta', 160)"><span class="item-name">Red Sauce Pasta</span><div><span class="item-price">160</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Steamed Momos', 90)"><span class="item-name">Steamed Momos</span><div><span class="item-price">90</span><span class="add-icon">+</span></div></div>
            </div>
        </section>
        
        <section id="indian" class="category-section">
            <h2 class="category-title">Indian Main Course</h2>
            <h3 class="sub-category-title">Paneer Special</h3>
            <div class="menu-list">
                <div class="menu-row" onclick="openItemModal('Paneer Butter Masala', 190)"><span class="item-name">Paneer Butter Masala</span><div><span class="item-price">190</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Kaju Curry', 180)"><span class="item-name">Kaju Curry</span><div><span class="item-price">180</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Sev Tamatar', 140)"><span class="item-name">Sev Tamatar</span><div><span class="item-price">140</span><span class="add-icon">+</span></div></div>
                <div class="menu-row" onclick="openItemModal('Butter Naan', 35)"><span class="item-name">Butter Naan</span><div><span class="item-price">35</span><span class="add-icon">+</span></div></div>
            </div>
        </section>

        <div style="text-align:center; padding: 20px; color:#888;">
            (More items exist in full menu...)
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2026 Hotel Yashoday. All Rights Reserved.</p>
</footer>

<div class="cart-fab" onclick="openCartModal()">
    ðŸ›’
    <span class="cart-count" id="cart-count">0</span>
</div>

<div class="modal-overlay" id="item-modal">
    <div class="modal-card">
        <div class="modal-header">
            <span>Add to Order</span>
            <button class="close-modal" onclick="closeModal('item-modal')">&times;</button>
        </div>
        <h3 id="modal-item-name" style="margin-bottom: 10px;">Item Name</h3>
        <p style="color: var(--accent); font-weight: bold; font-size: 1.2rem; margin-bottom: 20px;">â‚¹<span id="modal-item-price">0</span></p>
        
        <div class="form-group">
            <label>Quantity</label>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-outline" onclick="adjustModalQty(-1)">-</button>
                <input type="number" id="modal-qty" value="1" style="width: 50px; text-align: center;" readonly>
                <button class="btn btn-outline" onclick="adjustModalQty(1)">+</button>
            </div>
        </div>

        <button class="btn btn-primary full-width" onclick="confirmAddToCart()">Add to Cart</button>
    </div>
</div>

<div class="modal-overlay" id="cart-modal">
    <div class="modal-card">
        <div class="modal-header">
            <span>Your Cart</span>
            <button class="close-modal" onclick="closeModal('cart-modal')">&times;</button>
        </div>
        <div id="cart-items-container">
            <p>Your cart is empty.</p>
        </div>
        <div style="margin-top: 20px; border-top: 2px solid #eee; padding-top: 15px;">
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem;">
                <span>Total</span>
                <span>â‚¹<span id="cart-total">0</span></span>
            </div>
            <br>
            <button class="btn btn-success full-width" onclick="initiateCheckout()">Place Order</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="login-modal">
    <div class="modal-card">
        <div class="modal-header">
            <span>Login</span>
            <button class="close-modal" onclick="closeModal('login-modal')">&times;</button>
        </div>
        <div style="display: flex; margin-bottom: 20px; border-bottom: 1px solid #ddd;">
            <button class="btn full-width" id="tab-customer" onclick="switchLoginTab('customer')" style="background:var(--accent); color: white;">Customer</button>
            <button class="btn full-width" id="tab-admin" onclick="switchLoginTab('admin')" style="background: #eee;">Admin</button>
        </div>
        <div id="form-customer">
            <div class="form-group">
                <label>Phone Number (Your Unique ID)</label>
                <input type="tel" id="cust-phone" class="form-control" placeholder="10 digit mobile number">
            </div>
            <div class="form-group">
                <label>Your Name</label>
                <input type="text" id="cust-name" class="form-control" placeholder="Enter Name">
            </div>
            <div class="form-group">
                <label>Table No / Room No</label>
                <input type="text" id="cust-table" class="form-control" placeholder="e.g. Table 5">
            </div>
            <button class="btn btn-primary full-width" onclick="handleCustomerLogin()">Start Ordering</button>
        </div>
        <div id="form-admin" class="hidden">
            <div class="form-group">
                <label>Admin ID</label>
                <input type="text" id="admin-id" class="form-control">
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="admin-pass" class="form-control">
            </div>
            <button class="btn btn-primary full-width" onclick="handleAdminLogin()">Admin Login</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="my-orders-modal">
    <div class="modal-card">
        <div class="modal-header">
            <span>My Active Orders</span>
            <button class="close-modal" onclick="closeModal('my-orders-modal')">&times;</button>
        </div>
        <p style="font-size: 0.8rem; color: #666; margin-bottom: 10px; text-align:center;">
            Orders disappear here when Completed or Rejected.
        </p>
        <div id="my-orders-list"></div>
        <button class="btn btn-outline full-width" style="margin-top: 15px;" onclick="renderMyOrders()">Refresh Status</button>
    </div>
</div>

<script>
    let cart = [];
    let currentUser = null; 
    let currentItemToAdd = null;

    document.addEventListener('DOMContentLoaded', () => {
        checkSession();
    });

    function checkSession() {
        // Changed to localStorage so login persists even after closing browser
        const storedUser = localStorage.getItem('yashoday_user');
        if (storedUser) {
            currentUser = JSON.parse(storedUser);
            if (currentUser.type === 'admin') {
                showAdminDashboard();
            } else {
                updateHeaderUser();
            }
        }
    }

    function openModal(id) { document.getElementById(id).classList.add('active'); }
    function closeModal(id) { document.getElementById(id).classList.remove('active'); }

    // --- ITEM & CART ---
    function openItemModal(name, price) {
        currentItemToAdd = { name, price };
        document.getElementById('modal-item-name').innerText = name;
        document.getElementById('modal-item-price').innerText = price;
        document.getElementById('modal-qty').value = 1;
        openModal('item-modal');
    }

    function adjustModalQty(change) {
        const input = document.getElementById('modal-qty');
        let val = parseInt(input.value) + change;
        if (val < 1) val = 1;
        input.value = val;
    }

    function confirmAddToCart() {
        const qty = parseInt(document.getElementById('modal-qty').value);
        addToCart(currentItemToAdd.name, currentItemToAdd.price, qty);
        closeModal('item-modal');
    }

    function addToCart(name, price, qty) {
        const existing = cart.find(item => item.name === name);
        if (existing) { existing.qty += qty; } else { cart.push({ name, price, qty }); }
        updateCartUI();
        alert(`${name} added to cart!`); 
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        updateCartUI();
    }

    function updateCartUI() {
        document.getElementById('cart-count').innerText = cart.length;
        const container = document.getElementById('cart-items-container');
        let html = '';
        let total = 0;
        if (cart.length === 0) {
            html = '<p style="text-align:center; color:#999;">Cart is empty.</p>';
        } else {
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;
                html += `
                    <div class="cart-item">
                        <div>
                            <div style="font-weight:bold;">${item.name}</div>
                            <div style="font-size:0.85rem; color:#666;">â‚¹${item.price} x ${item.qty}</div>
                        </div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span style="font-weight:bold;">â‚¹${itemTotal}</span>
                            <button class="btn btn-danger" style="padding:2px 8px;" onclick="removeFromCart(${index})">X</button>
                        </div>
                    </div>`;
            });
        }
        container.innerHTML = html;
        document.getElementById('cart-total').innerText = total;
    }

    function openCartModal() { updateCartUI(); openModal('cart-modal'); }

    // --- AUTH ---
    function openLoginModal() {
        if (currentUser) {
            if(confirm("Logout?")) logout();
        } else {
            openModal('login-modal');
        }
    }

    function switchLoginTab(type) {
        const custBtn = document.getElementById('tab-customer');
        const adminBtn = document.getElementById('tab-admin');
        const custForm = document.getElementById('form-customer');
        const adminForm = document.getElementById('form-admin');

        if (type === 'customer') {
            custBtn.style.background = 'var(--accent)'; custBtn.style.color = 'white';
            adminBtn.style.background = '#eee'; adminBtn.style.color = 'black';
            custForm.classList.remove('hidden'); adminForm.classList.add('hidden');
        } else {
            adminBtn.style.background = 'var(--primary)'; adminBtn.style.color = 'white';
            custBtn.style.background = '#eee'; custBtn.style.color = 'black';
            adminForm.classList.remove('hidden'); custForm.classList.add('hidden');
        }
    }

    function handleCustomerLogin() {
        const name = document.getElementById('cust-name').value;
        const table = document.getElementById('cust-table').value;
        const phone = document.getElementById('cust-phone').value;

        if (!name || !table || !phone) { alert("Please fill all details. Phone number is required to track orders."); return; }

        currentUser = { type: 'customer', name, table, phone };
        // Save to LocalStorage so they stay logged in
        localStorage.setItem('yashoday_user', JSON.stringify(currentUser));
        
        closeModal('login-modal');
        updateHeaderUser();
        if (cart.length > 0) initiateCheckout();
    }

    function handleAdminLogin() {
        const id = document.getElementById('admin-id').value;
        const pass = document.getElementById('admin-pass').value;
        if (id === 'admin' && pass === 'admin123') {
            currentUser = { type: 'admin', name: 'Manager' };
            localStorage.setItem('yashoday_user', JSON.stringify(currentUser));
            closeModal('login-modal');
            showAdminDashboard();
        } else { alert("Invalid Credentials"); }
    }

    function logout() { 
        localStorage.removeItem('yashoday_user'); 
        location.reload(); 
    }

    function updateHeaderUser() {
        const btn = document.getElementById('btn-login');
        btn.innerText = `Hi, ${currentUser.name}`;
        document.getElementById('btn-my-orders').classList.remove('hidden'); 
    }

    // --- CHECKOUT ---
    function initiateCheckout() {
        if (cart.length === 0) { alert("Cart is empty!"); return; }
        if (!currentUser) { alert("Please Login to Place Order"); openLoginModal(); return; }
        if (currentUser.type === 'admin') { alert("Admins cannot place orders."); return; }

        const orderId = 'ORD-' + Date.now().toString().slice(-6);
        const newOrder = {
            id: orderId,
            customer: currentUser,
            items: cart,
            total: parseInt(document.getElementById('cart-total').innerText),
            status: 'Pending',
            timestamp: new Date().toLocaleTimeString()
        };

        let allOrders = JSON.parse(localStorage.getItem('yashoday_orders')) || [];
        allOrders.push(newOrder);
        localStorage.setItem('yashoday_orders', JSON.stringify(allOrders));

        cart = [];
        updateCartUI();
        closeModal('cart-modal');
        
        openMyOrdersModal();
    }

    // --- MY ORDERS (CUSTOMER) ---
    function openMyOrdersModal() {
        if (!currentUser || currentUser.type === 'admin') return;
        renderMyOrders();
        openModal('my-orders-modal');
    }

    function renderMyOrders() {
        const container = document.getElementById('my-orders-list');
        const allOrders = JSON.parse(localStorage.getItem('yashoday_orders')) || [];
        
        // UNIQUE USER LOGIC: Filter specifically by Phone Number
        const myOrders = allOrders.filter(o => 
            o.customer.phone === currentUser.phone && 
            (o.status === 'Pending' || o.status === 'Accepted')
        );

        myOrders.reverse();

        if (myOrders.length === 0) {
            container.innerHTML = '<div style="text-align:center; padding:20px; color:#999;">No active orders.<br><small>Completed/Rejected orders are removed.</small></div>';
            return;
        }

        let html = '';
        myOrders.forEach(order => {
            let badgeClass = order.status === 'Pending' ? 'bg-pending' : 'bg-accepted';
            let statusText = order.status === 'Pending' ? 'Waiting...' : 'Accepted (Preparing)';
            const itemsSummary = order.items.map(i => `${i.name} (${i.qty})`).join(', ');

            html += `
                <div class="order-card status-${order.status}" style="padding: 10px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span style="font-weight:bold; font-size:0.9rem;">#${order.id}</span>
                        <span class="status-badge ${badgeClass}">${statusText}</span>
                    </div>
                    <div style="font-size:0.85rem; color:#555; margin-bottom:5px;">${itemsSummary}</div>
                    <div style="text-align:right; font-weight:bold; font-size:0.9rem;">Total: â‚¹${order.total}</div>
                </div>
            `;
        });
        container.innerHTML = html;
    }

    // --- ADMIN DASHBOARD ---
    function showAdminDashboard() {
        document.getElementById('customer-view').classList.add('hidden'); 
        document.getElementById('admin-panel').classList.remove('hidden');
        
        document.querySelector('.cart-fab').classList.add('hidden');
        document.getElementById('btn-login').innerText = "Admin Panel";
        document.getElementById('btn-my-orders').classList.add('hidden');
        renderAdminOrders();
    }

    function renderAdminOrders() {
        const container = document.getElementById('admin-orders-list');
        const allOrders = JSON.parse(localStorage.getItem('yashoday_orders')) || [];
        allOrders.sort((a, b) => b.id.localeCompare(a.id)); 

        if (allOrders.length === 0) { container.innerHTML = '<p style="text-align:center;">No orders found.</p>'; return; }

        let html = '';
        allOrders.forEach(order => {
            const itemsSummary = order.items.map(i => `${i.name} (x${i.qty})`).join(', ');
            let statusClass = 'status-' + order.status;

            let actions = '';
            if (order.status === 'Pending') {
                actions = `<button class="btn btn-primary" onclick="updateOrderStatus('${order.id}', 'Accepted')">Accept</button>
                           <button class="btn btn-danger" onclick="updateOrderStatus('${order.id}', 'Rejected')">Reject</button>`;
            } else if (order.status === 'Accepted') {
                actions = `<button class="btn btn-success" onclick="updateOrderStatus('${order.id}', 'Completed')">Mark Complete</button>`;
            } else {
                actions = `<span style="font-weight:bold; color:#666;">${order.status}</span>`;
            }

            html += `
                <div class="order-card ${statusClass}">
                    <div class="order-header">
                        <span>#${order.id} | ${order.timestamp}</span>
                        <span style="font-weight:bold;">${order.status}</span>
                    </div>
                    <div style="font-weight:bold; font-size:1.1rem; color:var(--primary);">
                        ${order.customer.table} - ${order.customer.name}
                    </div>
                    <div style="font-size:0.8rem; color:#555; margin-bottom:5px;">
                        Phone: ${order.customer.phone}
                    </div>
                    <div class="order-items-list">${itemsSummary}</div>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px;">
                        <span style="font-weight:bold;">Total: â‚¹${order.total}</span>
                        <div style="display:flex; gap:5px;">${actions}</div>
                    </div>
                </div>`;
        });
        container.innerHTML = html;
    }

    function updateOrderStatus(orderId, newStatus) {
        let allOrders = JSON.parse(localStorage.getItem('yashoday_orders')) || [];
        const orderIndex = allOrders.findIndex(o => o.id === orderId);
        if (orderIndex > -1) {
            allOrders[orderIndex].status = newStatus;
            localStorage.setItem('yashoday_orders', JSON.stringify(allOrders));
            renderAdminOrders();
        }
    }
</script>

</body>
</html>
